{"ast":null,"code":"// C:\\...\\frontend\\src\\services\\bookingService.js\n\n// --- Standardized Base URL ---\nconst API_BASE_URL = 'http://localhost:5000/api'; // Standardize the base URL to include /api\n\n// --- 1. Fetch Courts ---\nexport const fetchCourts = async () => {\n  // FIX: Use the correct API_BASE_URL\n  const response = await fetch(`${API_BASE_URL}/courts`);\n  if (!response.ok) {\n    throw new Error('Failed to fetch courts.');\n  }\n  return response.json();\n};\n\n// --- 2. Calculate Price (The Fix for the 404!) ---\n// NOTE: This must be exported so the component can use it\nexport const calculatePrice = async bookingDetails => {\n  // The fixed URL now correctly links to the route in bookingRoutes.js\n  const response = await fetch(`${API_BASE_URL}/bookings/calculate-price`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(bookingDetails)\n  });\n  if (!response.ok) {\n    // This handles both 404 and other backend failures gracefully\n    const errorText = await response.text();\n    console.error(\"Backend Error Response:\", errorText);\n    throw new Error('Price calculation failed.');\n  }\n  return response.json();\n};\n\n// --- 3. Create Booking ---\nexport const createBooking = async bookingDetails => {\n  // FIX: Use the correct API_BASE_URL\n  const response = await fetch(`${API_BASE_URL}/bookings`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(bookingDetails)\n  });\n  if (!response.ok) {\n    const errorData = await response.json();\n    throw new Error(errorData.message || 'Booking failed due to a server error.');\n  }\n  return response.json();\n};\n\n// --- 4. Fetch Coaches ---\nexport const fetchCoaches = async () => {\n  // FIX: Use the standardized API_BASE_URL\n  const response = await fetch(`${API_BASE_URL}/coaches`);\n  if (!response.ok) {\n    throw new Error('Failed to fetch coaches from API');\n  }\n  return response.json();\n};","map":{"version":3,"names":["API_BASE_URL","fetchCourts","response","fetch","ok","Error","json","calculatePrice","bookingDetails","method","headers","body","JSON","stringify","errorText","text","console","error","createBooking","errorData","message","fetchCoaches"],"sources":["C:/Users/Sharon/Documents/project assignment/root/frontend/src/services/bookingService.js"],"sourcesContent":["// C:\\...\\frontend\\src\\services\\bookingService.js\r\n\r\n// --- Standardized Base URL ---\r\nconst API_BASE_URL = 'http://localhost:5000/api'; // Standardize the base URL to include /api\r\n\r\n// --- 1. Fetch Courts ---\r\nexport const fetchCourts = async () => {\r\n    // FIX: Use the correct API_BASE_URL\r\n    const response = await fetch(`${API_BASE_URL}/courts`);\r\n    \r\n    if (!response.ok) {\r\n        throw new Error('Failed to fetch courts.');\r\n    }\r\n    return response.json();\r\n};\r\n\r\n// --- 2. Calculate Price (The Fix for the 404!) ---\r\n// NOTE: This must be exported so the component can use it\r\nexport const calculatePrice = async (bookingDetails) => { \r\n    // The fixed URL now correctly links to the route in bookingRoutes.js\r\n    const response = await fetch(`${API_BASE_URL}/bookings/calculate-price`, { \r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(bookingDetails),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        // This handles both 404 and other backend failures gracefully\r\n        const errorText = await response.text();\r\n        console.error(\"Backend Error Response:\", errorText);\r\n        throw new Error('Price calculation failed.');\r\n    }\r\n\r\n    return response.json();\r\n};\r\n\r\n// --- 3. Create Booking ---\r\nexport const createBooking = async (bookingDetails) => {\r\n    // FIX: Use the correct API_BASE_URL\r\n    const response = await fetch(`${API_BASE_URL}/bookings`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(bookingDetails),\r\n    });\r\n    \r\n    if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.message || 'Booking failed due to a server error.');\r\n    }\r\n    return response.json();\r\n};\r\n\r\n// --- 4. Fetch Coaches ---\r\nexport const fetchCoaches = async () => {\r\n    // FIX: Use the standardized API_BASE_URL\r\n    const response = await fetch(`${API_BASE_URL}/coaches`);\r\n    \r\n    if (!response.ok) {\r\n        throw new Error('Failed to fetch coaches from API');\r\n    }\r\n    return response.json();\r\n};"],"mappings":"AAAA;;AAEA;AACA,MAAMA,YAAY,GAAG,2BAA2B,CAAC,CAAC;;AAElD;AACA,OAAO,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EACnC;EACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGH,YAAY,SAAS,CAAC;EAEtD,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,yBAAyB,CAAC;EAC9C;EACA,OAAOH,QAAQ,CAACI,IAAI,CAAC,CAAC;AAC1B,CAAC;;AAED;AACA;AACA,OAAO,MAAMC,cAAc,GAAG,MAAOC,cAAc,IAAK;EACpD;EACA,MAAMN,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGH,YAAY,2BAA2B,EAAE;IACrES,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,cAAc,EAAE;IACpB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,cAAc;EACvC,CAAC,CAAC;EAEF,IAAI,CAACN,QAAQ,CAACE,EAAE,EAAE;IACd;IACA,MAAMU,SAAS,GAAG,MAAMZ,QAAQ,CAACa,IAAI,CAAC,CAAC;IACvCC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEH,SAAS,CAAC;IACnD,MAAM,IAAIT,KAAK,CAAC,2BAA2B,CAAC;EAChD;EAEA,OAAOH,QAAQ,CAACI,IAAI,CAAC,CAAC;AAC1B,CAAC;;AAED;AACA,OAAO,MAAMY,aAAa,GAAG,MAAOV,cAAc,IAAK;EACnD;EACA,MAAMN,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGH,YAAY,WAAW,EAAE;IACrDS,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACL,cAAc;EACvC,CAAC,CAAC;EAEF,IAAI,CAACN,QAAQ,CAACE,EAAE,EAAE;IACd,MAAMe,SAAS,GAAG,MAAMjB,QAAQ,CAACI,IAAI,CAAC,CAAC;IACvC,MAAM,IAAID,KAAK,CAACc,SAAS,CAACC,OAAO,IAAI,uCAAuC,CAAC;EACjF;EACA,OAAOlB,QAAQ,CAACI,IAAI,CAAC,CAAC;AAC1B,CAAC;;AAED;AACA,OAAO,MAAMe,YAAY,GAAG,MAAAA,CAAA,KAAY;EACpC;EACA,MAAMnB,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGH,YAAY,UAAU,CAAC;EAEvD,IAAI,CAACE,QAAQ,CAACE,EAAE,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,kCAAkC,CAAC;EACvD;EACA,OAAOH,QAAQ,CAACI,IAAI,CAAC,CAAC;AAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}